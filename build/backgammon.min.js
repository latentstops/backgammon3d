var Stats=function(){var t=Date.now(),e=t,i=0;return{functions:[],begin:function(){t=Date.now()},end:function(){i++;var t=Date.now(),o=this.interval;return t>e+o&&(this.fps=Math.round(1e3*i/(t-e)),e=t,this.functions.forEach(function(t){if(t){var e=t.func,i=t.scope;e&&i&&e.call(i)}}),i=0),t},update:function(){t=this.end()},interval:3e3}},Backgammon3DBoard;!function(){var t=function(){};Backgammon3DBoard=new t}(),function(){var t=function(){this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.horizontalStep=null,this.verticalStep=null,this.verticalStepOut=null,this.positionMap=null,this.positionMapIterator=null,this.positions={},this.points=null,this.dot=null},t.prototype.init=function(t){this.initProperties(),this.scene=t,this.horizontalStep=.54,this.verticalStep=.48,this.verticalStepOut=.142,this.positionMap=[],this.positionMapIterator=0,this.initPoints(),this.initPositions(),this.initDot()},t.prototype.initDot=function(){this.dot=new THREE.Mesh(new THREE.SphereGeometry(.01),new THREE.MeshLambertMaterial({wireframe:!0}))},t.prototype.initPoints=function(){this.points=new THREE.Object3D,this.points.name="Points"},t.prototype.initPositions=function(){this.positions={rightDownOut:new THREE.Vector3(4.04,.3,2.57),rightDown:new THREE.Vector3(3.3,.04,2.55),leftDown:new THREE.Vector3((-.6),.04,2.55),leftUp:new THREE.Vector3((-3.3),.04,(-2.55)),rightUp:new THREE.Vector3(.6,.04,(-2.55)),rightUpOut:new THREE.Vector3(4.04,.3,(-2.57)),leftDownOut:new THREE.Vector3((-4.04),.3,2.57),leftUpOut:new THREE.Vector3((-4.04),.3,(-2.57)),hitUp:new THREE.Vector3(0,.31,(-1)),hitDown:new THREE.Vector3(0,.31,1)}},t.prototype.fillBoard=function(){this.fillRightDownOut(),this.fillRightDown(),this.fillLeftDown(),this.fillLeftUp(),this.fillRightUp(),this.fillRightUpOut(),this.fillHitDown(),this.fillHitUp(),this.fillLeftDownOut(),this.fillLeftUpOut()},t.prototype.fillRightDown=function(){var t=this.positions.rightDown,e=-this.horizontalStep,i=-this.verticalStep,o=15,n=6,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillRightDownOut=function(){var t=this.positions.rightDownOut,e=-this.horizontalStep,i=-this.verticalStepOut,o=15,n=1,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillLeftDown=function(){var t=this.positions.leftDown,e=-this.horizontalStep,i=-this.verticalStep,o=15,n=6,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillLeftDownOut=function(){var t=this.positions.leftDownOut,e=-this.horizontalStep,i=-this.verticalStepOut,o=15,n=1,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillLeftUp=function(){var t=this.positions.leftUp,e=this.horizontalStep,i=this.verticalStep,o=15,n=6,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillLeftUpOut=function(){var t=this.positions.leftUpOut,e=this.horizontalStep,i=this.verticalStepOut,o=15,n=1,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillRightUp=function(){var t=this.positions.rightUp,e=this.horizontalStep,i=this.verticalStep,o=15,n=6,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillRightUpOut=function(){var t=this.positions.rightUpOut,e=this.horizontalStep,i=this.verticalStepOut,o=15,n=1,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillHitUp=function(){var t=this.positions.hitUp,e=this.horizontalStep,i=this.verticalStep,o=15,n=1,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fillHitDown=function(){var t=this.positions.hitDown,e=this.horizontalStep,i=this.verticalStep,o=15,n=1,a={horizontalStep:e,verticalStep:i,startPosition:t,verticalCheckersCount:o,horizontalCheckersCount:n};this.fill(a)},t.prototype.fill=function(t){function e(t,e){var o=i.positionMap;o[t]||(o[t]=[]),o[t].push(e)}var i=this,o=this.dot,n=this.verticalStepOut,a=t.startPosition,r=t.horizontalStep,s=t.verticalStep,c=t.verticalCheckersCount,h=t.horizontalCheckersCount,p=o.clone();p.position.copy(a);for(var l=(this.scene,0);l<h;l++){for(var u=0;u<c;u++){var m=p.clone();m.position.copy(p.position),a!=this.positions.hitUp&&a!=this.positions.hitDown?u>4&&a!=this.positions.hitUp&&a!=this.positions.hitDown&&Math.abs(s)==Math.abs(this.verticalStep)?(m.position.x+=l*r,m.position.z+=4*s,m.position.y+=n,e(this.positionMapIterator,m.position)):(m.position.x+=l*r,m.position.z+=u*s,e(this.positionMapIterator,m.position)):e(this.positionMapIterator,m.position)}this.positionMapIterator++}},Backgammon3DBoard.PositionMapGenerator=t}(),function(){var t=function(t,e){this.manager=t;var i=this.manager.scene,o=i.getObjectByName(this.manager.config.checker.name),n=this.manager.config;this.init(i,o,n,e)};t.prototype.initProperties=function(){this.scaleFactor=null,this.positionMap=null,this.materialMap=null,this.positionMapIterator=null,this.points=null,this.scene=null,this.checker=null,this.mirrorState=0,this.isColorSwitched=0},t.prototype.init=function(t,e,i,o){this.initProperties(),this.scene=t,this.isMirrored=o,this.checker=e,this.checkerGeometryHigh=e.geometry,this.scaleFactor=new THREE.Vector3(.01,.01,.01),this.modelsPath=i,this.initPositionMap(),this.initPoints(),this.initMaterialMap(),this.initCheckerPicker(),this.beautifyChecker()},t.prototype.initPoints=function(){this.points=new THREE.Object3D;var t=this.points;t.name="Points";var e=this.positionMap,i=this.scene;for(var o in e){var n=(e[o],new THREE.Object3D);n.name="point",n.index=o,t.add(n)}i.add(t)},t.prototype.initPositionMap=function(){this.isMirrored;this.positionMapGenerator=new Backgammon3DBoard.PositionMapGenerator(this.scene),this.positionMapGenerator.fillBoard(),this.positionMap=this.positionMapGenerator.positionMap.slice(0)},t.prototype.mirrorPositionMap=function(t,e){if(void 0!==t&&this.mirrorState!=t){this.mirrorState=t;var i=this.positionMap,o=i.shift(),n=i.splice(0,12),a=i.splice(0,12);n=n.reverse(),a=a.reverse(),i.unshift.apply(i,a),i.unshift.apply(i,n),i.unshift(o);var r=i[0].slice(0),s=i[25].slice(0);i[0]=i[28],i[28]=r,i[25]=i[29],i[29]=s,this.recalculatePositions(e),this.manager.textWriter.updatePositions(e)}},t.prototype.initMaterialMap=function(){var t={white:14666416,black:2236962},e=new THREE.MeshPhongMaterial({color:t.black});e.shininess=30;var i=new THREE.MeshPhongMaterial({color:t.white});i.shininess=30,this.materialMap=[i,e],this.colorsMap=t},t.prototype.initCheckerPicker=function(){var t=this.manager;this.checkerPicker=new Backgammon3DBoard.CheckerPicker(t,this.positionMap)},t.prototype.beautifyChecker=function(){var t=this.checker;if(t){t.rotateX(-Math.PI/2);var e=new THREE.MeshPhongMaterial;e.shininess=0,e.bumpScale=.01,t.material=e,t.combine=THREE.MixOperation,t.visible=!0,t.castShadow=!0,t.receiveShadow=!0}},t.prototype.recalculatePositions=function(t){var e=this,i=this.scene,o=i.getObjectByName("Points"),n=this.manager.textWriter;o.children.forEach(function(i,o){i.children.forEach(function(i,n){e.checkerPicker.movementManager.animateCheckerMove(i,e.positionMap[o][n],o,t)})}),n&&n.updateCheckersCounts()},t.prototype.setCheckersInPoint=function(t,e){var i=this.points.children[t];i.children.length=0;for(var o=this.positionMap[t],n=this.checker,a=this.materialMap,r=0;r<e.length;r++){var s=o[r],c=n.clone();c.material=a[+e[r]],c.position.copy(s),c.index=t,c.readOnly=!0,c.checkerType=+e[r],c.rotation.x="Checker_01.001"==this.manager.config.checker.name?-Math.PI/2:c.rotation.x,0==t&&(c.rotation.x=-Math.PI),25==t&&(c.rotation.x=0),i.children[r]=c}var h=this.manager.textWriter;h.updateCheckersCounts()},t.prototype.setReadOnly=function(t,e){var i=this.scene,o=i.getObjectByName("Points"),n=o.children.filter(function(e){return 0!=e.children.length&&e.children[e.children.length-1].checkerType==t});n.forEach(function(t){t.children.forEach(function(t){t.readOnly=e})})},t.prototype.setPlaceOfOut=function(t,e){this.mirrorState?(this.mirrorPositionMap(0,!1),this.setPlaceOfOutForNormalMode(t,e),this.mirrorPositionMap(1,!1)):this.setPlaceOfOutForNormalMode(t,e)},t.prototype.setPlaceOfOutForNormalMode=function(t,e){var i=this.positionMap,o=this.positionMapGenerator,n=this.manager.textWriter;if(0==t)switch(e){case 2:i[0]=o.positionMap[0].slice(0),i[25]=o.positionMap[25].slice(0);break;case 3:i[0]=o.positionMap[28].slice(0),i[28]=o.positionMap[0].slice(0)}if(1==t)switch(e){case 0:i[25]=o.positionMap[25].slice(0),i[29]=o.positionMap[29].slice(0);break;case 1:i[25]=o.positionMap[29].slice(0),i[29]=o.positionMap[25].slice(0)}n&&n.updatePositions(),this.recalculatePositions()},t.prototype.switchCheckersColors=function(t){t=t||0,this.isColorSwitched=this.isColorSwitched==t?this.isColorSwitched:t;var e=this.isColorSwitched,i=(this.scene,this.colorsMap),o=this.points,n=(new THREE.Color(i.black),new THREE.Color(i.white),this);o.traverse(function(t){if(t instanceof THREE.Mesh){var i=t;1==i.checkerType?e?i.material=n.materialMap[0].clone():i.material=n.materialMap[1].clone():e?i.material=n.materialMap[1].clone():i.material=n.materialMap[0].clone()}}),this.manager.textWriter.updateCheckersCounts()},t.prototype.fillBoardFromMap=function(){var t=this.scene,e=this.positionMap,i=this.checker,o=this.points,n=(i.material.clone(),new THREE.MeshPhongMaterial({color:2236962})),a=new THREE.MeshPhongMaterial({color:14666416}),r=[a,n];for(var s in e){var c=e[s],h=new THREE.Object3D;h.name="point",h.index=s,o.add(h);var p=c[0];if(30!=s){var l=i.clone();l.material=r[s%2],l.position.copy(p),l.index=s,l.checkerType=s%2,h.add(l)}}t.add(o)},Backgammon3DBoard.CheckerManager=t}(),function(){var t=function(t,e,i,o){this.manager=t,this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.dump={position:[],rotation:[]},this.dumpedAnimation={},this.three=null,this.modelsPath=null,this.texturesMap=null,this.startPosition=null,this.DICE_TEXTURES_PATH=null},t.prototype.init=function(t,e,i,o){function n(t){var e=THREE.ImageUtils.loadTexture(a.DICE_TEXTURES_PATH+t);return e}this.initProperties(),this.diceType=i,this.startPosition=e.startPosition||{x:0,y:0,z:0},this.three=e.three,this.modelsPath=o,this.DICE_TEXTURES_PATH=this.modelsPath.texturesPath;var a=this;this.texturesMap={white:{1:n("dice_white/1.png"),2:n("dice_white/2.png"),3:n("dice_white/3.png"),4:n("dice_white/4.png"),5:n("dice_white/5.png"),6:n("dice_white/6.png")},black:{1:n("dice_black/1.png"),2:n("dice_black/2.png"),3:n("dice_black/3.png"),4:n("dice_black/4.png"),5:n("dice_black/5.png"),6:n("dice_black/6.png")},red:{1:n("dice_red/1.png"),2:n("dice_red/2.png"),3:n("dice_red/3.png"),4:n("dice_red/4.png"),5:n("dice_red/5.png"),6:n("dice_red/6.png")}},this.currentTextureMap={}},t.prototype.setStartPosition=function(t,e,i){this.startPosition.x=t,this.startPosition.y=e,this.startPosition.z=i},t.prototype.drop=function(t){switch(t=parseInt(t)){case 1:this.drop1();break;case 2:this.drop2();break;case 3:this.drop3();break;case 4:this.drop4();break;case 5:this.drop5();break;case 6:this.drop6();break;default:this.dropX()}},t.prototype.drop1=function(){var t=this.dumpedAnimation.result;this.setNumber1(t)},t.prototype.drop2=function(){var t=this.dumpedAnimation.result;this.setNumber2(t)},t.prototype.drop3=function(){var t=this.dumpedAnimation.result;this.setNumber3(t)},t.prototype.drop4=function(){var t=this.dumpedAnimation.result;this.setNumber4(t)},t.prototype.drop5=function(){var t=this.dumpedAnimation.result;this.setNumber5(t)},t.prototype.drop6=function(){var t=this.dumpedAnimation.result;this.setNumber6(t)},t.prototype.dropX=function(){var t=this.dumpedAnimation.result;this.setNumber6(t)},t.prototype.setNumber=function(t,e){if(this.three.visible=!1,e=parseInt(e),!isNaN(e))for(var i={1:[1,2,3,6,5,4],2:[2,3,1,5,4,6],3:[3,1,2,4,6,5],4:[4,5,6,3,2,1],5:[5,6,4,2,1,3],6:[6,4,5,1,3,2]},o=this.currentTextureMap,n=i[1].indexOf(e),a=1;a<=6;a++){var r=i[a];if(r.indexOf(t)==n){var s=this.three.material;s.map=o[a]}}},t.prototype.setCurrentTextureMap=function(t){t=t||"0",this.color=t;var e={0:"white",1:"black",2:"red"},i=this.texturesMap;this.currentTextureMap=i[e[t]]},t.prototype.setNumber1=function(t){this.setNumber(1,t)},t.prototype.setNumber2=function(t){this.setNumber(2,t)},t.prototype.setNumber3=function(t){this.setNumber(3,t)},t.prototype.setNumber4=function(t){this.setNumber(4,t)},t.prototype.setNumber5=function(t){this.setNumber(5,t)},t.prototype.setNumber6=function(t){this.setNumber(6,t)},t.prototype.setDumpedAnimation=function(t){this.dumpedAnimation=t},t.prototype.playDumpAnimation=function(t,e){this.three.visible=!0;var i=this.dumpedAnimation,o=i.position[t],n=i.rotation[t];if(!o)return!1;if(!n)return!1;this.manager.isAnimated||(o=i.position[i.position.length-1],n=i.rotation[i.rotation.length-1]);var a=new THREE.Vector3,r=new THREE.Vector3,s=-.38,c=this.startPosition.z;switch(a.copy(o),a.y-=.02,r.copy(n),e){case 1:r.copy(n).multiplyScalar(-1),a.x=-a.x,a.z-=c+s;break;case 2:a.z-=c+s;break;case 0:1==this.diceType&&(r.copy(n).multiplyScalar(-1),a.x=-a.x,a.z-=c+s)}return a.y-=.02,this.three.position.copy(a),this.three.rotation.x=r.x,this.three.rotation.y=r.y,this.three.rotation.z=r.z,!0},Backgammon3DBoard.Dice=t}(),function(){var t=function(t,e,i,o){this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.dices=[],this.animations=[],this.ANIMATION_FILE_ARRAY=[],this.scene=null,this.audio=null,this.params=null,this.modelsPath=null,this.diceGeometry=null,this.animationIndex=null,this.ANIMATIONS_PATH=null,this.DICE_TEXTURES_PATH=null,this.isColorsSwitched=null},t.prototype.init=function(t,e,i,o){this.initProperties();var n={mass:.3,diceParams:{x:.2,y:.2,z:.2}};this.manager=t,this.scene=t.scene,this.dices=[],this.diceGeometry=null,this.params=e||n,this.animationIndex=-1,this.isAnimationFromRight=!1,this.modelsPath=i,this.ANIMATIONS_PATH=this.modelsPath.animationsPath,this.DICE_TEXTURES_PATH=this.modelsPath.texturesPath,this.ANIMATION_FILE_ARRAY=["0.json","1.json"],this.initDiceGeometry(),this.initAnimations(o)},t.prototype.createDice=function(t){return new Backgammon3DBoard.Dice(this,{three:this.createTHREE(null)},t,this.modelsPath)},t.prototype.createDices=function(){this.dices.push(this.createDice(1)),this.dices.push(this.createDice(2))},t.prototype.initAnimations=function(t){this.animations=t},t.prototype.initDiceGeometry=function(){var t=this.scene,e=t.getObjectByName("Dice_01")||t.children[0];this.diceGeometry=e.geometry,this.createDices(),this.addToScene(),t.remove(e)},t.prototype.createTHREE=function(t){function e(){var t=i.diceGeometry,e=n.x/3.2;if(i.scaleIndex=e,t){t.computeVertexNormals();var o=new THREE.MeshPhongMaterial;o.map=THREE.ImageUtils.loadTexture(i.DICE_TEXTURES_PATH+"1.png"),o.combine=THREE.MultiplyOperation,o.shininess=50;var a=new THREE.Mesh(t,o);return a.castShadow=!0,a.receiveShadow=!0,a.name="dice",a.scale.set(e,e,e),a.visible=!1,a}}var i=this,o=t||this.params,n=o.diceParams,a=(2*n.x,2*n.y,2*n.z,{});return this.diceGeometry?e():a},t.prototype.update=function(t){var e=this.dices[0],i=this.dices[1];e&&i&&(e.three&&i.three&&e.three.mesh&&i.three.mesh&&(e.three=e.three.mesh,i.three=i.three.mesh),e&&i&&e.three.material&&i.three.material&&this.startAnimationHandler(t))},t.prototype.startAnimationHandler=function(t){var e=this.dices[0],i=this.dices[1],o=this.rollType;this.animationIndex<0||(e.playDumpAnimation(this.animationIndex,o)&&i.playDumpAnimation(this.animationIndex,o)||this.stopAnimation(),this.animationIndex+=Math.round(t))},t.prototype.playAnimation=function(t,e){this.isAnimated=e,this.rollType=t,this.animationIndex=0},t.prototype.stopAnimation=function(){this.animationIndex=-10},t.prototype.addToScene=function(){var t=this.dices[0],e=this.dices[1],i=this.scene;i.add(t.three),i.add(e.three)},t.prototype.drop=function(t,e,i,o){this.lastRoll=[t,e];var n=this.scene.getObjectByName("ProjectionObject");n.renderOrder=10;var a=this.dices[1],r=this.dices[0];r.three.visible=!0,a.three.visible=!0,0!=t&&0!=e&&r&&a&&(this.setDiceColorsFromRollType(i),r.setStartPosition(-10,1,.2),a.setStartPosition(-10,1,.6),r.setDumpedAnimation(this.animations[0]),a.setDumpedAnimation(this.animations[1]),r.drop(t),a.drop(e),this.playAnimation(i,o),this.playSound())},t.prototype.setDiceColorsFromRollType=function(t){t=+t;var e=this.getDice1(),i=this.getDice2(),o=this.manager.checkerManager.isColorSwitched;switch(t){case 0:e.setCurrentTextureMap(o?1:0),i.setCurrentTextureMap(o?0:1);break;case 1:e.setCurrentTextureMap(o?1:0),i.setCurrentTextureMap(o?1:0);break;case 2:e.setCurrentTextureMap(o?0:1),i.setCurrentTextureMap(o?0:1)}},t.prototype.switchDiceColors=function(t){var e=this.getDice1(),i=this.getDice2(),o=+!+e.color+"",n=+!+i.color+"";e.setCurrentTextureMap(o),i.setCurrentTextureMap(n),this.lastRoll&&this.drop(this.lastRoll[0],this.lastRoll[1],this.rollType,!1)},t.prototype.setDiceState=function(t,e){var i=[1,.4,.2],o=this.getDice(t);o.three.material.transparent=!0,o.three.material.opacity=i[e]},t.prototype.getDice1=function(){return this.getDice(1)},t.prototype.getDice2=function(){return this.getDice(2)},t.prototype.getDice=function(t){var e=t-1;return this.dices[e]},t.prototype.playSound=function(){},Backgammon3DBoard.DiceManager=t}(),function(){var t=function(t){this.manager=t;var e=this.manager.scene,i=this.manager.config;this.init(e,i)};t.prototype.init=function(t,e){this.initProperties(),this.scene=t,this.config=e,this.initPositionMap(),this.initPoints(),this.initResetParams(),this.initCube(),this.addToScene(),this.initMovementManager(),this.initDoubleCubePicker(),this.checkDoubleCubeState()},t.prototype.initProperties=function(){this.scene=null,this.config=null,this.cube=null,this.resetParams=null,this.positionMap=null,this.movementManager=null},t.prototype.initCube=function(){var t=this.config.double_cube,e=t.texturesPath,i=this.scene,o="dice",n=i.getObjectByName(o),a=n.geometry.clone(),r=new THREE.MeshPhongMaterial,s=THREE.ImageUtils.loadTexture(e+"cube_black_64.png");s.minFilter=THREE.LinearMipMapLinearFilter,s.anisotropy=this.manager.renderer.getMaxAnisotropy(),r.map=s;var c=.08,h=new THREE.Mesh(a,r);h.scale.set(c,c,c),h.name=t.name,h.index=t.name,h.castShadow=!0,h.receiveShadow=!0,h.readOnly=!0,h.currentNumber=64,h.exists=!0,this.cube=h,this.reset()},t.prototype.setReadOnly=function(t){var e=this.cube;e.readOnly=t},t.prototype.reset=function(){var t=this.cube,e=this.resetParams;t.position.copy(e.position),t.rotation.copy(e.rotation)},t.prototype.initResetParams=function(){var t=this.positionMap,e=new THREE.Euler(0,0,0);this.resetParams={position:t[0][0].clone(),rotation:e.clone()}},t.prototype.addToScene=function(){var t=this.scene,e=this.cube;t.add(e)},t.prototype.initMovementManager=function(){this.movementManager=new Backgammon3DBoard.MovementManager(this.manager)},t.prototype.initDoubleCubePicker=function(){this.doubleCubePicker=new Backgammon3DBoard.DoubleCubePicker(this.manager,this.positionMap)},t.prototype.initPoints=function(){this.points=new THREE.Object3D;var t=this.points;t.name="DoubleCubePoints";var e=this.positionMap,i=this.scene;for(var o in e){var n=(e[o],new THREE.Object3D);n.name="double-cube-point",n.index=o,t.add(n)}i.add(t)},t.prototype.initPositionMap=function(){var t=.23,e=new THREE.Vector3(0,t,0),i=new THREE.Vector3(0,.25,(-1.97)),o=new THREE.Vector3(0,.25,1.97),n=new THREE.Vector3((-1.97),t,0),a=new THREE.Vector3(1.97,t,0);this.positionMap=[[e],[i],[o],[n],[a]]},t.prototype.reversePositionMap=function(){var t=this.positionMap,e=t.shift(),i=t.splice(0,2),o=t.splice(0,2);o=o.reverse(),i=i.reverse(),t.push(e),t.push.apply(t,i),t.push.apply(t,o)},t.prototype.setNumber=function(t,e){var i=this.cube;if(i.currentNumber!=t&&!i.isRotating){"same"==t&&(t=i.currentNumber),i.currentNumber=t;var o=this.manager,n=this.movementManager,a=o.movementManager.boardRotationState,r={64:{z:0,x:0,y:a?-Math.PI:0},2:{z:-Math.PI/2,x:0,y:a?-Math.PI:0},4:{z:Math.PI/2,x:0,y:a?-Math.PI:0},8:{x:Math.PI/2,z:a?Math.PI:0,y:0},16:{x:-Math.PI/2,z:a?-Math.PI:0,y:0},32:{x:Math.PI,z:0,y:a?Math.PI:0}},s=r[t];s&&n.rotateDoubleCube(s,e)}},t.prototype.setDoubleCube=function(t,e,i){this.doubleCubePicker.move({to:t},i),this.setNumber(e,i)},t.prototype.isDoubleCubeExist=function(t){t=t||0,this.cube.exists=t,this.checkDoubleCubeState()},t.prototype.checkDoubleCubeState=function(){var t=this.cube;t.exists=t.exists||!1,t.visible=t.exists},Backgammon3DBoard.DoubleCubeManager=t}(),function(){var t=function(t){this.manager=t,this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.boardDegreeState=1},t.prototype.init=function(){this.initProperties()},t.prototype.animateCheckerMove=function(t,e,i,o){var n=t.position,a=t.rotation;t.isMoving=!0;var r=o?215:0,s=o?280:0;switch(i){case 0:new TWEEN.Tween(a).to({x:-Math.PI,y:0,z:0},r).easing(TWEEN.Easing.Exponential.Out).start();break;case 25:new TWEEN.Tween(a).to({x:0,y:0,z:0},r).easing(TWEEN.Easing.Exponential.Out).start();break;default:if(!a)break;new TWEEN.Tween(a).to({x:-Math.PI/2,y:0,z:0},r).easing(TWEEN.Easing.Exponential.Out).start()}!t.mouseMove&&new TWEEN.Tween(n).to({x:e.x,z:e.z},s).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(t){var i=t*Math.PI,o=3*Math.sin(i);o=o>.5?.5:o,o=o<e.y?e.y:o,n.y=o}).onComplete(function(){n.y=e.y,t.isMoving=!1,t.mouseMove=!1}).start(),t.mouseMove&&new TWEEN.Tween(n).to(e,s).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){t.isMoving=!1,t.mouseMove=!1}).start()},t.prototype.rotateBoard=function(t,e){if(this.boardRotationState!=t&&!this.isCameraRotating){this.boardRotationState=t;var i=this.manager.config,o=this.manager.camera,n=this.manager.textWriter,a=o.position.y,r=this.manager.cameraControls.target.clone(),s=i.camera.position.clone(),c=e?1e3:0,h=this;switch(t){case 0:o.position.z=this.boardDegreeState?-s.z:-1e-6;break;case 1:o.position.z=this.boardDegreeState?s.z:1e-6;break;default:return}var p=o.position.z,l={value:0},u=t>0?-Math.PI:Math.PI;this.rotateDoubleCubeWithCamera(e),this.rotateCheckerNumbersWithCamera(e),h.animate(l,{value:u},c,"Linear","None",function(){o.lookAt(r),h.isCameraRotating=!0},function(){o.position.x=p*Math.sin(l.value),o.position.z=p*Math.cos(l.value),o.lookAt(r)},function(){o.lookAt(r),h.isCameraRotating=!1}),e&&h.animate(o.position,{y:22},c/2,"Sinusoidal","InOut",function(){o.lookAt(r)},function(){o.lookAt(r)},function(){h.animate(o.position,{y:a},c/2,"Sinusoidal","In",function(){o.lookAt(r)},function(){o.lookAt(r)},function(){o.lookAt(r)})}),n.updatePositions()}},t.prototype.setBoardDegreeState=function(t,e){if(this.boardDegreeState!=t&&!this.isCameraRotating){this.boardDegreeState=t;var i=this.manager,o=this.manager.camera,n=this.manager.config.camera.position.clone(),a=this.manager.cameraControls.target,r=this.boardRotationState,s=this.manager.textWriter;s.updatePositions();var c,h,p=i.config.camera.zoom;switch(t){case 0:c=r?-1e-6:1e-6,h=1.12;break;case 1:c=r?-n.z:n.z,h=p;break;default:return}var l=e>0?600:0;this.animate(o.position,{z:c,x:0},l,"Linear","None",function(){o.lookAt(a)},function(){o.lookAt(a)},function(){o.lookAt(a)}),this.animate(o,{zoom:h},l,"Linear","None",function(){o.updateProjectionMatrix()},function(){o.updateProjectionMatrix()},function(){o.updateProjectionMatrix()})}},t.prototype.animate=function(t,e,i,o,n,a,r,s){new TWEEN.Tween(t).to(e,i).easing(TWEEN.Easing[o][n]).onStart(function(){a&&a()}).onUpdate(function(){r&&r()}).onComplete(function(){s&&s()}).start()},t.prototype.update=function(t){},t.prototype.rotateDoubleCubeWithCamera=function(t){var e=this.manager.doubleCubeManager;e.setNumber("same",t)},t.prototype.moveDoubleCubeUpDown=function(t){if(t){var e=this,i=this.manager.doubleCubeManager.cube,o=i.position.clone();o.y=.5;var n=i.position.clone();n.y=.23,this.animate(i.position,{y:o.y},500,"Linear","None",null,null,function(){e.animate(i.position,{y:n.y},500,"Linear","None")})}},t.prototype.rotateDoubleCube=function(t,e){var i=this.manager.doubleCubeManager.cube,o=e?1e3:0;this.animate(i.rotation,t,o,"Linear","None",function(){i.isRotating=!0},null,function(){i.isRotating=!1}),this.moveDoubleCubeUpDown(e)},t.prototype.animateDoubleCubeMove=function(t,e,i){var o=this,n=t.position,a=i?400:0,r=i?50:0;o.animate(n,{y:.5},r,"Linear","None",null,null,function(){o.animate(n,{x:e.x,z:e.z},a,"Linear","None",null,null,function(){o.animate(n,{y:.23},r,"Linear","None")})})},t.prototype.rotateCheckerNumbersWithCamera=function(t){var e=this,i=t?1e3:0,o=this.manager.textWriter.points,n=this.boardRotationState?-Math.PI:0;o.traverse(function(t){t instanceof THREE.Mesh&&e.animate(t.rotation,{z:n},i,"Linear","None")})},Backgammon3DBoard.MovementManager=t}(),function(){var t=function(t,e,i){this.init.apply(this,arguments)};t.prototype.init=function(t,e,i){this.initProperties(t,e,i),this.detect(),this.initRenderer(),this.initCanvas(),this.connectEvents()},t.prototype.initProperties=function(t,e,i){this.domContainer=t,this.eventSource=e,this.config=i,this.isWeb=null,this.isMobile=null,this.canvas=null,this.mouseDowns=[],this.mouseUps=[],this.mouseMoves=[]},t.prototype.detect=function(){try{this.isWeb=void 0!==HTMLDivElement}catch(t){this.isWeb=!1}this.isMobile=this.mobileCheck()},t.prototype.mobileCheck=function(){var t=!1;try{!function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator&&navigator.userAgent||navigator&&navigator.vendor||window&&window.opera)}catch(t){console.log("NO Navigator")}return t},t.prototype.setCoordsFromMobileEvent=function(t){if(this.isMobile){var e=t.touches&&t.touches[0],i=e&&e.clientX,o=e&&e.clientY;t.layerX=i,t.layerY=o}},t.prototype.initRenderer=function(){var t=this.isWeb;return t?(this.initRendererForWeb(),console.log("IN WEB"),this.isMobile&&console.log("IN MOBILE")):(this.initRendererForQT(),console.log("IN QT")),this.renderer},t.prototype.initRendererForWeb=function(){var t=this.domContainer,e=t.clientWidth,i=t.clientHeight,o=this.config.renderer,n=new THREE.WebGLRenderer({antialias:o.antialias,alpha:o.alpha});n.shadowMap.enabled=!this.isMobile&&o.shadowMap.enabled,n.shadowMap.soft=!this.isMobile&&o.shadowMap.soft,n.setSize(e,i);var a=n.domElement;a.oncontextmenu=function(){return!1},t.appendChild(n.domElement),this.renderer=n},t.prototype.initRendererForQT=function(){var t=this.domContainer,e=this.config.renderer,i=new THREE.Canvas3DRenderer({antialias:e.antialias,alpha:e.alpha,canvas:t,devicePixelRatio:t.devicePixelRatio});i.setSize(t.width,t.height),i.shadowMapEnabled=e.shadowMap.enabled,i.shadowMapSoft=e.shadowMap.soft,this.renderer=i},t.prototype.addMouseDownFunction=function(t){t&&this.mouseDowns.push(t)},t.prototype.addMouseMoveFunction=function(t){t&&this.mouseMoves.push(t)},t.prototype.addMouseUpFunction=function(t){t&&this.mouseUps.push(t)},t.prototype.connectEvents=function(){this.connectMouseDown(),this.connectMouseMove(),this.connectMouseUp()},t.prototype.removeEvents=function(){this.removeMouseEvents(),this.removeResizeEvent()},t.prototype.removeMouseEvents=function(){if(this.isWeb||this.isMobile){var t=this.mouseMoves,e=this.renderer.domElement,i={0:"touchstart",1:"touchmove",2:"touchend"};t.forEach(function(t,o){e.removeEventListener(i[o],t,!1)})}},t.prototype.removeResizeEvent=function(){(this.isWeb||this.isMobile)&&window.removeEventListener("resize",this.resizeFunction,!1)},t.prototype.connectMouseDown=function(){if(!this.isMouseDownConnected){var t=this,e=function(e){t.setCoordsFromMobileEvent(e);for(var i=0;i<t.mouseDowns.length;i++){var o=t.mouseDowns[i];o(e)}};if(this.isWeb){var i=this.renderer.domElement;if(this.isMobile)return void i.addEventListener("touchstart",e,!1);i.onmousedown=e}else{var o=this.eventSource;o.mouseDown.connect(e)}this.isMouseDownConnected=!0}},t.prototype.connectMouseMove=function(){if(!this.isMouseMoveConnected){var t=this,e=function(e){t.isMobile&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),t.setCoordsFromMobileEvent(e);for(var i=0;i<t.mouseDowns.length;i++){var o=t.mouseMoves[i];t.isWeb&&e.preventDefault(),o(e)}};if(this.isWeb){var i=this.renderer.domElement;if(this.isMobile)return void i.addEventListener("touchmove",e,!1);i.onmousemove=e}else{var o=this.eventSource;o.mouseMove.connect(e)}this.isMouseMoveConnected=!0}},t.prototype.connectMouseUp=function(){if(!this.isMouseUpConnected){var t=this,e=function(e){t.setCoordsFromMobileEvent(e);for(var i=0;i<t.mouseDowns.length;i++){var o=t.mouseUps[i];o(e),o(e)}};if(this.isWeb){var i=this.renderer.domElement;if(this.isMobile)return void i.addEventListener("touchend",e,!1);i.onmouseup=e}else{var o=this.eventSource;o.mouseUp.connect(e)}this.isMouseUpConnected=!0}},t.prototype.connectResize=function(t){var e=this.domContainer;this.resizeFunction=t,this.isWeb?window.addEventListener("resize",t,!1):e.resize_GL.connect(t)},t.prototype.initCanvas=function(){this.isWeb?this.canvas=this.renderer.domElement:this.canvas=this.domContainer},t.prototype.getCanvas=function(){return this.canvas},t.prototype.getRenderer=function(){return this.renderer},Backgammon3DBoard.PlatformDetector=t}(),function(){var t=function(){this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.loader=null,this.config=null},t.prototype.init=function(t){this.initProperties(),this.config=t,this.loader=new THREE.ObjectLoader},t.prototype.loadAll=function(t){var e=this;this.loadBoard(function(i){e.loadChecker(function(o){var n=e.config.checker.name,a=o.getObjectByName(n);i.add(a),e.loadDice(function(o){var n=e.config.dice.name,a=o.getObjectByName(n);i.add(a),e.loadDiceAnimations(function(e){t&&t(i,e)})})})})},t.prototype.xhrGet=function(t,e,i){var o=new THREE.LoadingManager,n=new THREE.XHRLoader(o);n.load(t,e,i)},t.prototype.loadBoard=function(t){var e=this.config.board.objectPath,i=this.config.board.texturesPath,o=this.loader;
o.setTexturePath(i),o.load(e,t)},t.prototype.loadChecker=function(t){var e=this.config.checker.objectPath,i=this.config.checker.texturesPath,o=this.loader;o.setTexturePath(i),o.load(e,t)},t.prototype.loadDice=function(t){var e=this.config.dice.objectPath,i=this.config.dice.texturesPath,o=this.loader;o.setTexturePath(i),o.load(e,t)},t.prototype.loadPlane=function(t){var e=this.config.plane.objectPath,i=this.config.plane.texturesPath,o=this.loader;o.setTexturePath(i),o.load(e,t)},t.prototype.loadDiceAnimations=function(t){for(var e=this,i=["0.json","1.json"],o=this.config.dice.animationsPath,n=i.length,a={},r=0;r<n;r++)!function(r){var s=i[r],c=o+s;e.xhrGet(c,function(e){e=JSON.parse(e),a[r]=e,Object.keys(a).length==n&&t&&t(a)})}(r)},t.prototype.setTexturePath=function(t){this.loader.setTexturePath.apply(this,arguments)},Backgammon3DBoard.BoardLoader=t}(),function(){var t=function(){};t.prototype={mouse:new THREE.Vector2,raycaster:new THREE.Raycaster,selectableObjects:[],projectionObject:null,intersectProjection:null,intersectObject:null,clickStarted:Date.now(),timeInterval:0,initParent:function(t){this.scene=t.scene,this.camera=t.camera,this.cameraControls=t.cameraControls,this.platformDetector=t.platformDetector,this.canvas=this.platformDetector.getCanvas(),this.domContainer=this.platformDetector.domContainer,this.initProjectionObject(),this.initEvents()},initProjectionObject:function(){var t=this.scene;this.projectionObject=t.getObjectByName("ProjectionObject")},initEvents:function(){this.addMouseDownEvent(),this.addMouseMoveEvent(),this.addMouseUpEvent()},addMouseDownEvent:function(){var t=this,e=this.manager;e.needRendering=!0;var i=function(e){var i=t.manager;i.needRendering=!0,t.createWebButton(e),t.mouseSet(e),t.raycaster.setFromCamera(t.mouse,t.camera);var o=t.raycaster.intersectObjects(t.selectableObjects,!0);t.intersectObject=o[0],t.intersectObject&&(t.cameraControls.enabled=!1),t.mouseDownCallBack&&t.mouseDownCallBack(e)};this.platformDetector.addMouseDownFunction(i)},addMouseMoveEvent:function(){var t=this,e=function(e){var i=t.manager;i.needRendering=!0,t.createWebButton(e),t.mouseSet(e),t.raycaster.setFromCamera(t.mouse,t.camera);var o=t.raycaster.intersectObject(t.projectionObject,!0);t.intersectProjection=o[0],t.mouseMoveCallBack&&t.mouseMoveCallBack(e)};this.platformDetector.addMouseMoveFunction(e)},addMouseUpEvent:function(){var t=this,e=function(e){var i=t.manager;i.needRendering=!1,t.createWebButton(e),t.mouseUpCallBack&&t.mouseUpCallBack(e),t.intersectObject=null};this.platformDetector.addMouseUpFunction(e)},mouseSet:function(t){var e=this.canvas;this.mouse.set(t.layerX/e.width*2-1,2*-(t.layerY/e.height)+1)},createWebButton:function(t){void 0===t.webButton&&(t.webButton=t.button||0)},getPlaceInfoFromMesh:function(t){if(t){for(var e=t,i=this.positionMap,o=100,n={position:null,index:null},a=0,r=27,s=a;s<=r;s++){var c=i[s];if(!c)break;c.forEach(function(t){var i=e.position.x,a=e.position.z,r=t.x,c=t.z,h=r-i,p=c-a,l=Math.sqrt(Math.pow(h,2)+Math.pow(p,2));l<o&&(o=l,n.index=s,n.position=t)})}return n}}},Backgammon3DBoard.Picker=t}(),function(){var t=function(t,e){this.manager=t,this.positionMap=e,this.init.apply(this,arguments)};t.prototype=new Backgammon3DBoard.Picker,t.prototype.constructor=t,t.prototype.init=function(t){this.scene=t.scene,this.cube=t.scene.getObjectByName("double_cube"),this.initParent(this.manager),this.initProperties(),this.initMovementManager()},t.prototype.initMovementManager=function(){this.movementManager=new Backgammon3DBoard.MovementManager},t.prototype.initProperties=function(){var t=this.scene;this.selectableObjects=[t.getObjectByName("double_cube")]},t.prototype.mouseMoveCallBack=function(){var t=this,e=t.selectedCube,i=t.intersectProjection,o=this.manager.cameraControls;e&&i&&(e.object.position.x=i.point.x,e.object.position.y=.5,e.object.position.z=i.point.z,o.enabled=!1)},t.prototype.mouseDownCallBack=function(){var t=this,e=t.intersectObject;if(e){if(e.object.readOnly)return;this.selectedCube=e}},t.prototype.mouseUpCallBack=function(){if(this.selectedCube){var t=this.getPlaceInfoFromMesh(this.selectedCube.object);this.doubleCubeMoved(t.index),this.playSound(),this.selectedCube=null}},t.prototype.doubleCubeMoved=function(t){this.move({to:t},!0)},t.prototype.move=function(t,e){if(t){t instanceof Object||(t={to:t});var i=t.to,o=this.positionMap,n=this.cube,a=o[i]&&o[i][0];a&&(n.mapIndex=i,this.movementManager.animateDoubleCubeMove(n,a,e))}},t.prototype.playSound=function(){},Backgammon3DBoard.DoubleCubePicker=t}(),function(){var t=function(t,e){this.manager=t,this.positionMap=e,this.mouseMoveStarted=!1,this.isMouseDown=!1;var i=this.manager.scene,o=this.manager.camera,n=this.manager.platformDetector;this.init(i,o,n,e)};t.prototype=Object.create(Backgammon3DBoard.Picker.prototype),t.prototype.constructor=t,t.prototype.init=function(t,e,i){this.initParent(this.manager),this.initProperties(),this.initMovementManager()},t.prototype.initProperties=function(){var t=this.scene;this.selectableObjects=t.getObjectByName("Points").children,this.lastMouseCoords=new THREE.Vector2},t.prototype.initMovementManager=function(){this.movementManager=new Backgammon3DBoard.MovementManager},t.prototype.mouseMoveCallBack=function(t){this.mouseMoveStarted=this.mouseMoveStarted?this.mouseMoveStarted:!this.mouseMoveStarted;var e=this.isMouseInsideCircle();if((!e||this.isCheckerMoveStarted)&&this.selectedChecker&&!(0!==t.webButton||t.buttons>1)){var i=this,o=i.selectedChecker,n=i.intersectProjection;n&&(i.selectedChecker.object.mouseMove=!0,o.object.position.x=n.point.x,o.object.position.y=.5,o.object.position.z=n.point.z,this.mouseMoveStarted&&!this.isCheckerMoveStarted&&this.mouseMoveStart(),this.isCheckerMoveStarted=!0)}},t.prototype.mouseMoveStart=function(){var t=this.selectedChecker;t.object.rotation.x=-Math.PI/2,this.manager.textWriter.updateCheckersCounts()},t.prototype.mouseDownCallBack=function(t){this.lastMouseCoords=this.mouse.clone();var e=this;this.manager.scene;this.isMouseDown=!0;var i=e.intersectObject;if(i){var o=i.object.index,n=e.selectableObjects[o].children.length,a={object:e.selectableObjects[o].children[n-1]};if(a.object.readOnly)return;if(a.object.isMoving)return;e.selectedChecker=a,e.platformDetector.isMobile&&(window.navigator.vibrate=window.navigator.vibrate||function(){}),e.platformDetector.isMobile&&window.navigator.vibrate(10);var r=e.selectableObjects[o].children.indexOf(e.selectedChecker.object),s=e.selectableObjects[o].children.splice(r,1)[0];e.selectableObjects[o].children.push(s),e.manager.gameHelper&&e.manager.gameHelper.turnLightOnFromMesh(a.object)}},t.prototype.allPossibleSteps=function(t){var e=this;setTimeout(function(){e.move({from:t,to:t},!0)},200)},t.prototype.maxStep=function(t){var e=this;setTimeout(function(){e.move({from:t,to:t+2},!0)},200)},t.prototype.minStep=function(t){var e=this;setTimeout(function(){e.move({from:t,to:t-2},!0)},200)},t.prototype.resetEventsParams=function(){this.isMouseDown=!1,this.selectedChecker=null,this.mouseMoveStarted=!1,this.isCheckerMoveStarted=!1},t.prototype.mouseUpCallBack=function(t){var e=this,i=e.selectedChecker;if(e.manager.gameHelper&&e.manager.gameHelper.turnOffAllLights(),i){var o=e.getPlaceInfoFromMesh(i.object),n=o.index,a=i.object.index,r={from:a,to:n};this.manager.diceManager;if(1===t.webButton)return e.resetEventsParams(),void e.allPossibleSteps(a);if(2===t.webButton)return e.resetEventsParams(),void e.minStep(a);var s=e.isMouseInsideCircle();if(s&&!e.isCheckerMoveStarted)return e.resetEventsParams(),e.maxStep(a),void this.manager.textWriter.updateCheckersCounts();e.resetEventsParams(),e.moved(r.from,r.to),e.playSound()}},t.prototype.isMouseInsideCircle=function(){var t=.02,e=this.mouse.x,i=this.lastMouseCoords.x,o=this.mouse.y,n=this.lastMouseCoords.y;return Math.sqrt(Math.pow(e-i,2)+Math.pow(o-n,2))<t},t.prototype.moveCollection=function(t,e){for(;t.length;){var i=t.splice(0,2),o={from:i[0],to:i[1]};this.move(o,e)}},t.prototype.move=function(t,e){var i=t.from,o=t.to,n=i==o,a=this.selectedChecker&&this.selectedChecker.object||this.getCheckerFromIndex(i);if(this.resetEventsParams(),a){var r=this.getPositionFromIndex(o,n);if(r){this.replaceChecker(i,o),this.animateMove(a,r,o,e);var s=this.manager.textWriter;s.updateCheckersCounts()}}},t.prototype.moved=function(t,e){this.moveCollection([t,e],!0)},t.prototype.replaceChecker=function(t,e){var i=this.selectableObjects[t],o=i.children,n=this.selectableObjects[e],a=n.children,r=this.getCheckerFromIndex(t);r.index=e;var s=o.indexOf(r);o.splice(s,1),a.push(r)},t.prototype.animateMove=function(t,e,i,o){this.movementManager.animateCheckerMove.apply(this,arguments)},t.prototype.getCheckerFromIndex=function(t){function e(t){return t[t.length-1]}var i=this.selectableObjects[t].children;return e(i)},t.prototype.getPositionFromIndex=function(t,e){var i=this.positionMap,o=this.selectableObjects[t]&&this.selectableObjects[t].children;if(o){var n=e?i[t][o.length-1]:i[t][o.length];return n}},t.prototype.playSound=function(){},Backgammon3DBoard.CheckerPicker=t}(),function(){var t=function(t){this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.manager=null,this.sprite=null,this.numbers=[]},t.prototype.init=function(t){this.initProperties(),this.manager=t,this.initPositionMap(),this.initPoints(),this.initObjects(),this.addToScene()},t.prototype.initPositionMap=function(){var t=this.manager.checkerManager.positionMap[0][0].clone(),e=this.manager.checkerManager.positionMap[25][0].clone();t.z=t.z>0?t.z+.6:t-.6,e.z=e.z<0?e.z-.6:e+.6,this.pipsMap={pips1:t,pips2:e},this.positionMap=this.manager.checkerManager.positionMap},t.prototype.initObjects=function(){var t=new THREE.MeshBasicMaterial({color:7435910}),e=this.getGeometryFromText(" 1 "),i=this.getGeometryFromText(" 2 "),o=new THREE.Mesh(e,t);o.name="pips1",o.scale.set(.12,.12,.012),o.rotateX(-Math.PI/4),o.castShadow=!0,o.receiveShadow=!0;var n=o.clone();n.geometry=i,n.name="pips2",n.position.copy(this.pipsMap.pips2),this.objects=[o,n],this.updatePositions(),this.hidePips()},t.prototype.hidePips=function(){this.setPipsVisibiliyState(!1)},t.prototype.showPips=function(){this.setPipsVisibiliyState(!0)},t.prototype.setPipsVisibiliyState=function(t){var e=this.getPips1(),i=this.getPips2();e.visible=t,i.visible=t},t.prototype.updatePositions=function(t){var e=this.manager.movementManager,i=e.boardDegreeState,o=e.boardRotationState;this.initPositionMap();var n=this.getPips1(),a=this.getPips2();n.rotation.x=-Math.PI/3,a.rotation.x=-Math.PI/3,n.rotation.y=0,a.rotation.y=0,i?(n.rotation.x=-Math.PI/3,a.rotation.x=-Math.PI/3):(n.rotation.x=-Math.PI/2,a.rotation.x=-Math.PI/2),o?(n.rotation.y=Math.PI,a.rotation.y=Math.PI):(n.rotation.y=0,a.rotation.y=0),i&&o&&(n.rotation.x=Math.PI/3,a.rotation.x=Math.PI/3,n.rotation.y=Math.PI,a.rotation.y=Math.PI),!i&&o&&(n.rotation.x=Math.PI/2,a.rotation.x=Math.PI/2),n.position.copy(this.pipsMap.pips1),a.position.copy(this.pipsMap.pips2)},t.prototype.addToScene=function(){var t=this.manager.scene;t.add(this.objects[0]),t.add(this.objects[1])},t.prototype.getMeshFromGeometry=function(t,e,i){var o=this.manager.checkerManager.isColorSwitched,n=[14666416,0],a=new THREE.MeshBasicMaterial({color:n[o?0:1]}),r=new THREE.MeshBasicMaterial({color:n[o?1:0]}),s={0:a,1:r},c=e?s[e]:a,h=new THREE.Mesh(t,c);return i&&h.scale.set(.15,.15,.01)||h.scale.set(.16,.16,.01),h.rotateX(-Math.PI/2),h},t.prototype.getGeometryFromText=function(t){var e=new THREE.TextGeometry(t,{size:1,height:1,curveSegments:3,font:"helvetiker"});return e.center(),e},t.prototype.updateCheckersCounts=function(){var t,e=this,i=this.manager.checkerManager.positionMap,o=this.manager.checkerManager.checkerPicker.selectableObjects,n=this.points,a=this.manager.checkerManager.checkerPicker.selectedChecker,r=a&&a.object.index,s=r?1:0;i.forEach(function(i,a){var c,h=o[a].children.length,p=a==r?h-s:h;if(c=26==a||27==a?p>1?p:null:p>5?p:null,0!=a&&25!=a)if(null!==c){var l=(c+"").length>1,u=e.getGeometryFromText(c),m=o[a].children[0].checkerType,d=e.getMeshFromGeometry(u,m,l);d.rotation.z=e.manager.movementManager.boardRotationState?-Math.PI:0;var f=i[6].clone();f.y+=.15,t=n.children[a],t.children=[],t.children.length=0,d.position.copy(f),d.index=a,t.add(d)}else t=n.children[a],t.children=[],t.children.length=0})},t.prototype.initPoints=function(){this.points=new THREE.Object3D;var t=this.points;t.name="Points";var e=this.positionMap,i=this.manager.scene;for(var o in e){var n=(e[o],new THREE.Object3D);n.name="point",n.index=o,t.add(n)}i.add(t)},t.prototype.write=function(t,e){var i=this.manager.scene,o=t;isNaN(+t)||(o=t?"pips1":"pips2");var n=i.getObjectByName(o);n.geometry=this.getGeometryFromText(e)},t.prototype.getPips1=function(){return this.getPips(1)},t.prototype.getPips2=function(){return this.getPips(2)},t.prototype.getPips=function(t){return this.objects[t-1]},Backgammon3DBoard.TextWriter=t}(),function(){var t=function(t){this.demo=!1,this.manager=t,this.init(t)};t.prototype.init=function(t){this.scene=t.scene,this.positionMap=t.checkerManager.positionMap,this.initProperties()},t.prototype.initProperties=function(){this.initPoint(),this.createPoints()},t.prototype.initPoint=function(){var t=new THREE.SphereGeometry(.05,10,10),e=65280,i=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:e}));this.point=i},t.prototype.createPoints=function(){this.points&&this.scene.remove(this.points);var t=new THREE.Object3D,e=new THREE.Object3D,i=this.point,o=this.positionMap,n=this.scene,a=new THREE.MeshBasicMaterial({color:0});a.transparent=!0,a.opacity=.6;for(var r=0;r<=25;r++){var s=o[r][0].clone(),c=s.z;s.z=c>0?c+.35:c-.35,s.y=.27;var h=i.clone();h.position.copy(s),h.visible=!1;var p=i.clone();p.material=a.clone(),p.position.copy(s),p.visible=!1,p.scale.set(.99,.99,.99),t.add(h),e.add(p)}n.add(t),n.add(e),this.points=t,this.points2=e},t.prototype.turnLightOnForIndex=function(t){this.changeLightState(t,!0)},t.prototype.turnLightOffForIndex=function(t){this.changeLightState(t,!1)},t.prototype.changeLightState=function(t,e){if(this.manager.platformDetector.isMobile){var i=this.points.children,o=i[t];o&&(o.visible=e)}},t.prototype.turnLightOnFromMesh=function(t){if(this.demo&&this.manager.platformDetector.isMobile){var e=this.manager,i=e.diceManager,o=e.checkerManager.checkerPicker,n=this.points.children,a=o.getPlaceInfoFromMesh(t),r=a.index,s=i.lastRoll||[],c=s[0],h=s[1],p=r+c,l=r+h,u=n[p],m=n[l];this.turnOffAllLights(),u&&(u.visible=!0),m&&(m.visible=!0)}},t.prototype.turnOffAllLights=function(){this.turnLightsOn(!1)},t.prototype.turnLightsOn=function(t){var e=this.points.children;e.forEach(function(e){e.visible=t})},t.prototype.turnOnOff=function(){var t=this.points,e=(this.points,Math.round(25*Math.random()));t.children[e].visible=!t.children[e].visible},Backgammon3DBoard.GameHelper=t}(),function(){var t=function(t){this.init.apply(this,arguments)};t.prototype={init:function(t){this.manager=t,this.priority=0,this.initConfig(),this.checkersOptimizationDone=!1,this.textureOptimizationDone=!1,this.shadowsOptimizationDone=!1,this.interval=3e3;var e=this.manager.stats;e.functions=[{func:this.update,scope:this}],this.initOptimizations()},initConfig:function(){this.config={FPS_MIN:30,FPS_MAX:45}},initOptimizations:function(){var t=[],e=this.manager,i=e.platformDetector.isWeb;t.push({isOptimized:!1,scope:this,func:this.optimizeShadows}),i&&t.push({isOptimized:!1,scope:this,func:this.optimizeCheckers}),t.push({isOptimized:!1,scope:this,func:this.optimizeTextures}),this.optimizations=t},optimizeNext:function(){this.manipulateOptimization(!1)},manipulateOptimization:function(t){var e=this.optimizations;for(var i in e){var o=e[i];if(o.isOptimized==t){var n=o.func,a=o.scope;n.call(a,t),o.isOptimized=!t;break}}},revertOptimizationNext:function(){this.manipulateOptimization(!0)},update:function(){var t=this.config,e=this.manager.stats,i=e.fps,o=this.manager.scene;o&&(t.FPS_MIN>i?this.optimizeNext():i>t.FPS_MAX&&this.revertOptimizationNext())},optimizeShadows:function(t){var e=this.manager,i=e.stats,o=e.scene;if(i){var n=o.getObjectByName("dLight2");i.fps,this.config;t?(n.castShadow=!0,n.shadowDarkness=.3):(n.castShadow=!(0==n.shadowDarkness),n.shadowDarkness=0)}},optimizeCheckers:function(t){function e(){t?i.checkerGeometry=i.manager.checkerManager.checkerGeometryHigh:i.checkerGeometry=i.checkerGeometryLow,l.children.forEach(function(t,e){t.children.forEach(function(t,e){t.geometry=i.checkerGeometry})})}var i=this,o=this.manager,n=o.stats,a=(+n.fps,o.config),r=a.checker.name,s=a.checker.objectPathLow,c=new THREE.ObjectLoader,h=o.scene,p=a.checker.nameLow,l=o.checkerManager.points;this.checkerHighGeometry=h.getObjectByName(r).geometry,!i.checkerGeometryLow&&c.load(s,function(t){i.checkerLoadginStarted=!0;var o=t.getObjectByName(p),n=o.geometry;n.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2)),i.checkerGeometryLow=n,e()}),i.checkerGeometryLow&&e(i.checkerGeometryLow)},optimizeTextures:function(t){if(!this.textureOptimizationDone){var e=this.manager,i=e.scene,o=e.config,n=o.board.texturesPath,a=this.boardImagePlane||new THREE.Mesh(new THREE.PlaneGeometry(9.3,6.2),new THREE.MeshPhongMaterial({map:THREE.ImageUtils.loadTexture(n+"BI.png"),side:THREE.DoubleSide,color:new THREE.Color(16777215)}));a.name="BI",a.rotateX(-Math.PI/2),this.boardImagePlane=a,i.getObjectByName(a.name)||i.add(a);var r=i.getObjectByName("Board_03"),s=i.getObjectByName("ShadowPlane");s.visible=!1,t?(r.visible=!0,s.visible=!0,i.getObjectByName(a.name).visible=!1):(r.visible=!1,s.visible=!1,i.getObjectByName(a.name).visible=!0)}}},Backgammon3DBoard.OptimizationManager=t}(),function(){var t=function(){arguments.length>0&&this.init.apply(this,arguments)};t.prototype.initProperties=function(){this.config={},this.isInited=!1,this.scene=null,this.clock=null,this.camera=null,this.loader=null,this.renderer=null,this.modelsPath=null,this.diceManager=null,this.domContainer=null,this.objectPicker=null,this.domContainer=null,this.cameraControls=null,this.checkerManager=null,this.onLoadComplete=function(){},this.animationFrameID=null,this.platformDetector=null,this.eventSource=null},t.prototype.init=function(t,e,i,o){i||console.error("Manger: Objects path is required!"),this.eventSource=e,this.mainPath=i,this.initialConfig=o||{rotationState:0,isColorSwitched:!1,isMirrored:!1,outPlaces:{placeOfOut1:0,placeOfOut2:25}},this.initConfig(i),this.initStats(),this.modelsPath=this.config||"",this.initDomContainer(t),this.initPlatformDetector(),this.initOptimizationManager(),this.initRenderer(),this.initCamera(),this.initLoader()},t.prototype.initConfig=function(t){this.config={mainPath:t,board:{objectPath:t+"board/board.json",texturesPath:t+"board/"},plane:{objectPath:t+"plane/opt-plane-01.json",texturesPath:t+"plane/",name:"Plane001"},checker:{objectPath:t+"checker/checker-high.json",objectPathLow:t+"checker/checker.json",texturesPath:t+"checker/",name:"Checker_High_001",nameLow:"Checker_01.001"},dice:{objectPath:t+"dice/dice.json",texturesPath:t+"dice/",animationsPath:t+"dice/animations/",name:"Dice_01"},double_cube:{texturesPath:t+"double_cube/",name:"double_cube"},renderer:{antialias:!0,alpha:!0,clearColor:5856617,shadowMap:{enabled:!0,soft:!0}},camera:{position:new THREE.Vector3(0,13,6),zoom:1.4}}},t.prototype.initDomContainer=function(t){this.domContainer=t||document.createElement("div")},t.prototype.initCamera=function(){var t=this.domContainer,e=t.clientWidth||t.width,i=t.clientHeight||t.height,o=this.config.camera;this.camera=new THREE.PerspectiveCamera(33,e/i,1,1e4),this.camera.position.copy(o.position),this.camera.lookAt(new THREE.Vector3(0,0,.3)),this.camera.zoom=o.zoom,this.camera.updateProjectionMatrix()},t.prototype.initScene=function(t){t?this.scene=t:this.scene=new THREE.Scene},t.prototype.initRenderer=function(){this.renderer=this.platformDetector.getRenderer()},t.prototype.initLoader=function(){var t=this.config;this.loader=new Backgammon3DBoard.BoardLoader(t)},t.prototype.initMovementManager=function(){this.movementManager=new Backgammon3DBoard.MovementManager(this)},t.prototype.initPlatformDetector=function(){var t=this.domContainer,e=this.eventSource,i=this.config;this.platformDetector=new Backgammon3DBoard.PlatformDetector(t,e,i)},t.prototype.fullInit=function(t,e){this.initScene(t),this.initDiceManager(e),this.initEvents(),this.initLights(),this.initCameraControls(),this.scene.getObjectByName("Board_03")&&this.beautifyScene(),this.initCheckerManager(),this.initDoubleCube(),this.initMovementManager(),this.initTextWriter(),this.applyInitialConfig(),this.initGameHelper(),this.initAPI(),this.onLoadComplete(),this.isInited=!0},t.prototype.applyInitialConfig=function(){var t=this.initialConfig,e=this.checkerManager,i=t.isMirrored,o=t.rotationState;this.setRotationState(o,!1),i&&e.mirrorPositionMap()},t.prototype.initCameraControls=function(){var t=this.camera;this.cameraControls=THREE.OrbitControls?new THREE.OrbitControls(t,this.renderer.domElement):{},this.cameraControls.target=new THREE.Vector3(0,(-.6),0)},t.prototype.initStats=function(){this.stats=new Stats},t.prototype.initOptimizationManager=function(){this.optimizationManager=new Backgammon3DBoard.OptimizationManager(this)},t.prototype.initCheckerManager=function(t){var e=this.scene,i=this.config.checker.name,o=e.getObjectByName(i);o.scale.set(.019,.019,.021),this.checkerManager=new Backgammon3DBoard.CheckerManager(this,t),e.remove(o)},t.prototype.initDiceManager=function(t){var e={mass:.3,diceParams:{x:.2,y:.2,z:.2}},i=this.modelsPath;this.diceManager=new Backgammon3DBoard.DiceManager(this,e,i.dice,t)},t.prototype.initTextWriter=function(){this.textWriter=new Backgammon3DBoard.TextWriter(this)},t.prototype.initDoubleCube=function(){this.doubleCubeManager=new Backgammon3DBoard.DoubleCubeManager(this)},t.prototype.initEvents=function(){var t=this,e=this.domContainer,i=this.platformDetector;if(e){var o=function(e){t.stopRendering=!1;var i=t.renderer,o=t.domContainer.clientWidth||t.domContainer.width,n=t.domContainer.clientHeight||t.domContainer.height;t.platformDetector.isMobile&&(o=window.innerWidth,n=window.innerHeight),t.camera.aspect=o/n,t.camera.updateProjectionMatrix(),i.setSize(o,n),t.platformDetector.isMobile&&window.innerWidth<window.innerHeight||t.platformDetector.isMobile&&(t.camera.position.set(0,9.364,3.414),t.camera.lookAt(new THREE.Vector3(0,(-.6),0)))};i.connectResize(o)}},t.prototype.load=function(){var t=this,e=this.loader;e.config=this.config,e.loadAll(function(e,i){t.fullInit(e,i)})},t.prototype.beautifyScene=function(){var t=this.scene,e=t.getObjectByName("Object001");e.receiveShadow=!0,e.castShadow=!0;var i=t.getObjectByName("Board_03");i.receiveShadow=!0,i.castShadow=!0;var o=this.config.board.texturesPath,n=this.config.plane.texturesPath,a=THREE.ImageUtils,r=a.loadTexture(o+"bg_board_tex_2000px.jpg",function(){});r.minFilter=THREE.LinearFilter;var s;s=new THREE.MeshPhongMaterial({color:16777215}),s.map=r,s.bumpMap=r,s.bumpScale=.003,s.shininess=50,i.material=s;var c=new THREE.Mesh(new THREE.PlaneGeometry(8.9,5.9),new THREE.MeshBasicMaterial);c.name="ProjectionObject",c.rotateX(-Math.PI/2),c.position.y=.5,c.material.transparent=!0,c.material.opacity=0;var h=new THREE.Mesh(new THREE.PlaneGeometry(11.8,11.8),new THREE.MeshPhongMaterial({map:THREE.ImageUtils.loadTexture(n+"flor_alpha_01.png"),side:THREE.DoubleSide,color:new THREE.Color(16777215)}));h.rotateX(-Math.PI/2),h.material.shininess=150,h.material.specular=0,h.material.transparent=!0,h.name="ShadowPlane",t.add(c),t.add(h)},t.prototype.initLights=function(){var t=this.scene,e=new THREE.HemisphereLight(16777215,16777215);e.position.set(0,50,0),e.name="hLight",e.intensity=.1,e.visible=!0;var i=new THREE.DirectionalLight(16777215,.1);i.position.set(0,5,5),i.name="dLight1",i.castShadow=!1,i.shadowCameraNear=3,i.shadowCameraFar=15,i.shadowCameraLeft=-5,i.shadowCameraRight=5,i.shadowCameraTop=5,i.shadowCameraBottom=-5,i.shadowDarkness=.3,i.shadowBias=0,i.shadowMapHeight=i.shadowMapWidth=1024,i.intensity=.6,i.visible=!0,t.add(i);var o=new THREE.DirectionalLight(16777215,.1);o.position.set(5,5,-5),o.name="dLight2",o.castShadow=!this.platformDetector.isMobile,o.shadowCameraNear=3,o.shadowCameraFar=15,o.shadowCameraLeft=-5,o.shadowCameraRight=5,o.shadowCameraTop=5,o.shadowCameraBottom=-5,o.shadowDarkness=.3,o.shadowBias=0,o.shadowMapHeight=o.shadowMapWidth=1024,o.intensity=.6,o.visible=!0,o.position.z=-i.position.z,o.position.x=-i.position.x,t.add(o),t.add(e)},t.prototype.initGameHelper=function(){this.gameHelper=Backgammon3DBoard.GameHelper&&new Backgammon3DBoard.GameHelper(this)},t.prototype.start=function(){function t(){i.stats.begin();var o=Date.now(),n=o-e;try{i.animationFrameID=requestAnimationFrame(t),i.animate(n/20)}catch(t){console.error(t)}e=o,i.stats.end()}var e,i=this;t()},t.prototype.destroy=function(){this.platformDetector.isWeb&&(this.renderer.clear(),this.animationFrameID&&cancelAnimationFrame(this.animationFrameID.data&&this.animationFrameID.data.handleId||this.animationFrameID),this.renderer.domElement.addEventListener("dblclick",null,!1),this.platformDetector.removeEvents(),this.scene=null,this.camera=null,this.cameraControls=null,this.checkerManager=null,this.diceManager=null)},t.prototype.animate=function(t){var e=this;if(!e.stopRendering&&e.isInited){var i=e.renderer,o=e.scene,n=e.camera,a=e.diceManager;e.physics,e.textWriter,e.optimizationManager;i.clear(),i.render(o,n),TWEEN.update(),a.update(t)}},t.prototype.setRotationState=function(t,e){var i=this.movementManager;i.rotateBoard(+t,e)},t.prototype.setPlaceOfOut=function(t,e){this.checkerManager.setPlaceOfOut(t,e)},t.prototype.setDoubleCubeReadOnly=function(t){this.doubleCubeManager.setReadOnly(t)},t.prototype.setDegreeState=function(t,e){var i=this.movementManager;i.setBoardDegreeState(+t,e)},t.prototype.initPhysics=function(){var t=(this.diceManager.getDice1(),this.diceManager.getDice2(),new DAC.PhysicsManager(this));this.physics=t},t.prototype.initAPI=function(){var t=this.movementManager,e=this.checkerManager,i=this.doubleCubeManager,o=this.diceManager,n=this.textWriter,a=e.checkerPicker,r=i.doubleCubePicker,s=this.gameHelper;this.api={set moved(t){a.moved=t},set maxStep(t){a.maxStep=t},set minStep(t){a.minStep=t},set allPossibleSteps(t){a.allPossibleSteps=t},set doubleCubeMoved(t){r.doubleCubeMoved=t},set playCheckerSound(t){a.playSound=t},set playDiceSound(t){o.playSound=t},set playDoubleCubeSound(t){i.playSound=t},setRotationState:function(e,i){e=+e,t.rotateBoard.apply(t,arguments)},setDegreeState:function(e,i){e=+e,t.setBoardDegreeState.apply(t,arguments)},setPlaceOfOut:function(t,i){e.setPlaceOfOut.apply(e,arguments)},setCheckersInPoint:function(t,i){e.setCheckersInPoint.apply(e,arguments)},move:function(t,e){a.moveCollection.apply(a,arguments)},setReadOnly:function(t,i){e.setReadOnly.apply(e,arguments)},switchColors:function(t){e.switchCheckersColors.apply(e,arguments),o.switchDiceColors.apply(o,arguments)},setMirroredState:function(t,i){e.mirrorPositionMap.apply(e,arguments)},setDoubleCubeReadOnly:function(t){i.setReadOnly.apply(i,arguments)},moveDoubleCubeTo:function(t,e){r.move.apply(r,arguments)},changeDoubleCubeTo:function(t,e,o){i.setDoubleCube.apply(i,arguments)},isDoubleCubeExist:function(t){i.isDoubleCubeExist.apply(i,arguments)},roll:function(t,e,i,n){o.drop.apply(o,arguments)},setDiceState:function(t,e){o.setDiceState.apply(o,arguments)},showPips:function(){n.showPips()},hidePips:function(){n.hidePips()},writePips:function(t,e){n.write(t,e)},setPips:function(t,e){n.write(0,""+t),n.write(1,""+e)},setPipsVisibility:function(t){n.setPipsVisibiliyState(t)},turnAllHintsOff:function(){s.turnOffAllLights()},setHintForIndex:function(t){s.turnLightOnForIndex(t)},removeHintForIndex:function(t){s.turnLightOffForIndex(t)},setHintsForIndexes:function(t,e){s.turnOffAllLights(),t[0]?(s.turnLightOnForIndex(t[0]),s.turnLightOnForIndex(t[1])):(s.turnLightOnForIndex(t),s.turnLightOnForIndex(e))}}},Backgammon3DBoard.Manager=t}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports={Stats:Stats,Backgammon3DBoard:Backgammon3DBoard});
//# sourceMappingURL=backgammon.min.js.map
